CREATE DATABASE  IF NOT EXISTS `student_testing_db_test`;
CREATE TABLE `student_testing_db_test`.`role` (`ROLE_ID` int(11) NOT NULL AUTO_INCREMENT, `ROLE_TYPE` varchar(45) NOT NULL, PRIMARY KEY (`ROLE_ID`), UNIQUE KEY `ROLE_TYPE_UNIQUE` (`ROLE_TYPE`)) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;
CREATE TABLE `student_testing_db_test`.`user` (`USER_ID` int(11) NOT NULL AUTO_INCREMENT, `LOGIN` varchar(45) NOT NULL, `PASSWD` varchar(45) NOT NULL, `NAME` varchar(45) NOT NULL, `SURNAME` varchar(45) NOT NULL, `ROLE_ID` int(11) NOT NULL, PRIMARY KEY (`USER_ID`), UNIQUE KEY `email_UNIQUE` (`LOGIN`), KEY `ROLE_TYPE_idx` (`ROLE_ID`), CONSTRAINT `ROLE_FK` FOREIGN KEY (`ROLE_ID`) REFERENCES `student_testing_db_test`.`role` (`ROLE_ID`) ON DELETE NO ACTION ON UPDATE NO ACTION) ENGINE=InnoDB AUTO_INCREMENT=23 DEFAULT CHARSET=utf8;
CREATE TABLE `student_testing_db_test`.`category` (`CATEGORY_ID` int(11) NOT NULL AUTO_INCREMENT, `CATEGORY_NAME` varchar(45) NOT NULL, PRIMARY KEY (`CATEGORY_ID`), UNIQUE KEY `NAME_UNIQUE` (`CATEGORY_NAME`)) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
CREATE TABLE `student_testing_db_test`.`test` (`TEST_ID` int(11) NOT NULL AUTO_INCREMENT, `TEST_NAME` varchar(60) NOT NULL, `DESC` varchar(255) NOT NULL, `OWNER_ID` int(11) NOT NULL, `CATEGORY_ID` int(11) NOT NULL, `PASSED_SCORE` int(3) NOT NULL, `PASSED_TIME` int(3) NOT NULL, `ACTIVE` tinyint(1) NOT NULL, PRIMARY KEY (`TEST_ID`), UNIQUE KEY `NAME_UNIQUE` (`TEST_NAME`), KEY `OWNER_ID_idx` (`OWNER_ID`), KEY `CATEGORY_FK_idx` (`CATEGORY_ID`), CONSTRAINT `CATEGORY_FK` FOREIGN KEY (`CATEGORY_ID`) REFERENCES `student_testing_db_test`.`category` (`CATEGORY_ID`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `OWNER_FK` FOREIGN KEY (`OWNER_ID`) REFERENCES `student_testing_db_test`.`user` (`USER_ID`) ON DELETE CASCADE ON UPDATE NO ACTION) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;
CREATE TABLE `student_testing_db_test`.`question` (`QUESTION_ID` int(11) NOT NULL AUTO_INCREMENT, `TEXT` varchar(400) NOT NULL, `TEST_ID` int(11) NOT NULL, PRIMARY KEY (`QUESTION_ID`), KEY `TEST_FK_idx` (`TEST_ID`), CONSTRAINT `TEST_FK` FOREIGN KEY (`TEST_ID`) REFERENCES `student_testing_db_test`.`test` (`TEST_ID`) ON DELETE CASCADE ON UPDATE NO ACTION) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8;
CREATE TABLE `student_testing_db_test`.`answer` (`ANSWER_ID` int(11) NOT NULL AUTO_INCREMENT, `TEXT` varchar(255) NOT NULL, `CORRECT` tinyint(1) DEFAULT NULL, `QUESTION_ID` int(11) NOT NULL, PRIMARY KEY (`ANSWER_ID`), KEY `QUESTION_FK_idx` (`QUESTION_ID`), CONSTRAINT `QUESTION_FK` FOREIGN KEY (`QUESTION_ID`) REFERENCES `student_testing_db_test`.`question` (`QUESTION_ID`) ON DELETE CASCADE ON UPDATE NO ACTION) ENGINE=InnoDB AUTO_INCREMENT=44 DEFAULT CHARSET=utf8;
CREATE TABLE `student_testing_db_test`.`complete_test` (`COMPLETE_ID` int(11) NOT NULL AUTO_INCREMENT, `SCORE` int(3) NOT NULL, `START_TIME` datetime NOT NULL, `ELAPSED_TIME` int(3) NOT NULL, `USER_ID` int(11) NOT NULL, `TEST_ID` int(11) NOT NULL, `PASSED` tinyint(1) NOT NULL, PRIMARY KEY (`COMPLETE_ID`), KEY `USER_FK_idx` (`USER_ID`), KEY `COMPLETE_TEST_FK_idx` (`TEST_ID`), CONSTRAINT `COMPLETE_TEST_FK` FOREIGN KEY (`TEST_ID`) REFERENCES `student_testing_db_test`.`test` (`TEST_ID`) ON DELETE CASCADE ON UPDATE NO ACTION, CONSTRAINT `USER_FK` FOREIGN KEY (`USER_ID`) REFERENCES `student_testing_db_test`.`user` (`USER_ID`) ON DELETE CASCADE ON UPDATE NO ACTION) ENGINE=InnoDB AUTO_INCREMENT=47 DEFAULT CHARSET=utf8;